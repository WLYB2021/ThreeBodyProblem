# 三体问题Web应用设计文档

## 1. 文档概述

### 1.1 目的
本文档详细描述三体问题Web应用的用户界面设计、交互流程和技术实现方案，为开发团队提供清晰的设计指导，确保产品既有趣味性又便于开发贡献。本版本针对开源项目定位进行了简化，聚焦核心功能的实现。

### 1.2 设计原则
- **极简主义**：采用黑白极简设计风格，去除一切非必要元素
- **清晰直观**：界面设计简洁明了，突出内容本身
- **有趣好玩**：突出三体系统的视觉效果和交互乐趣
- **易于实现**：设计考虑开发复杂度，便于社区贡献
- **基础响应式**：在主流设备上有基本的可用性
- **优雅克制**：通过排版、留白和细节处理营造高级感

### 1.3 术语定义
- **三体问题**：三个天体在万有引力相互作用下的运动问题
- **模拟引擎**：计算三体系统物理运动的核心算法
- **预设场景**：预定义的三体系统初始状态
- **轨迹**：天体运动路径的可视化展示
- **GitHub Pages**：用于部署静态网站的GitHub服务，可将项目直接托管为网站

## 2. 整体布局架构

### 2.1 悬浮式布局系统
- **中心视图区**：3D可视化渲染区域，占据100%视口空间，作为绝对视觉焦点
- **悬浮控制面板**：可折叠的悬浮式控制界面，默认半透明状态，从右侧滑入
- **悬浮信息面板**：按需显示的信息卡片，固定在左上角
- **标题悬浮组件**：固定在页面顶部中央，与顶部边界融合
- **悬浮操作按钮**：核心功能的快捷入口，最小化设计，合理分布在视图边缘
- **统一安全边距**：所有悬浮组件与屏幕边缘保持至少30px的安全距离，避免超出视口边界
- **组件间距规范**：同一区域内的多个悬浮组件之间保持至少20px间距，避免重叠
- **固定定位模式**：所有悬浮组件采用CSS fixed定位，确保在页面滚动时保持固定位置

### 2.2 基础响应式策略
- **桌面端**：主内容区+底部控制+侧边信息区
- **平板端**：主内容区优先，控制面板可折叠
- **移动端**：简化单栏布局，核心功能优先显示
- **基本触控支持**：确保触摸设备可操作

### 2.3 沉浸式交互模式
- **纯视图模式**：默认状态，仅显示中心3D视图
- **按需显示控制**：通过简单手势或快捷键唤出悬浮控制界面
- **完全沉浸体验**：所有辅助元素可完全隐藏，提供无干扰的视觉体验
- **优先核心视图**：确保3D渲染区域始终占据最大可视空间

## 3. 主要界面元素设计

### 3.1 悬浮操作按钮

**设计要点**：
- 极简圆形悬浮按钮，半透明黑色背景（rgba(0, 0, 0, 0.85)）
- 白色图标，简洁直观，大小适中（1.2rem）
- 按钮尺寸：桌面端48px，移动端56px
- 点击时轻微放大动画（transform: scale(1.1)），提供清晰反馈
- 与屏幕边缘保持安全距离，避免超出视口
- 按钮组内按钮垂直排列，按钮之间保持10px间距，避免重叠

**元素组成**：
- 核心功能按钮组（位于右下角）：
  - 预设场景（网格图标）
  - 简易教程（问号图标）
  - 关于/帮助（信息图标）
  - 设置面板开关（齿轮图标）
- 模拟控制按钮组（位于左下角）：
  - 开始/暂停/重置按钮（播放/暂停/刷新图标）

### 3.2 3D视图区（核心区域）

**设计要点**：
- 纯白背景，突出黑色三体系统
- 完全沉浸式设计，占据整个浏览器视口
- 移除所有非必要装饰，提供无干扰体验
- 确保在各种设备上都能流畅渲染
- 优化性能，支持长时间运行

**元素组成**：
- 三体系统3D渲染区域（占据100%视口）
- 高级摄像机控制：
  - 鼠标/触摸旋转、缩放、平移
  - 双击重置视角
- 核心显示选项：
  - 天体显示（黑色球体，白色高光）
  - 轨迹显示（细黑线条，可选显示）
- 极简状态指示：
  - 右下角小型FPS计数器（可隐藏）
  - 顶部中央临时提示信息

### 3.3 悬浮控制面板

**设计要点**：
- 半透明黑色背景面板，白色文字和控件
- 可折叠/展开的抽屉式设计，默认收起
- 从右侧滑入，可拖动调整位置
- 点击外部区域自动收起

**元素组成**：
- 面板头部：
  - 标题和关闭按钮
  - 简单的展开/折叠控制
- 参数设置区：
  - 三个天体的质量调整滑块
  - 模拟速度调节滑块
  - 预设参数快速选择
- 显示选项区：
  - 轨迹显示开关
  - 视觉效果调节
  - 性能优化选项
- 控件风格统一：
  - 极简黑白滑块
  - 无边框按钮
  - 紧凑布局，最小化占用空间

### 3.4 悬浮信息面板

**设计要点**：
- 小型悬浮卡片设计，半透明背景（rgba(0, 0, 0, 0.85)）
- 固定位置在左上角，与屏幕左边缘保持30px距离，与上边缘保持80px距离
- 视觉上悬浮，不可拖动，避免用户误操作导致的布局混乱
- 简洁的边框样式，圆角设计
- 最小宽度200px，确保足够的信息显示空间
- 不与其他悬浮组件重叠，与顶部标题组件保持至少50px间距

**元素组成**：
- 精简系统状态：
  - 当前模拟状态指示（运行/暂停）
  - 简洁的时间计数器
- 天体实时信息：
  - 可展开的天体数据面板
  - 显示位置、速度、质量等关键参数
- 数据可视化：
  - 简单的动态数值更新
  - 关键数据突出显示
- 排版设计：
  - 紧凑布局，最小字体大小确保可读性
  - 信息分层，按需展示
- 最小宽度：200px，确保足够的信息显示空间

### 3.5 沉浸体验优化

**设计要点**：
- 完全移除固定的顶部导航和底部状态栏
- 所有信息都通过悬浮元素按需显示
- 提供快捷键快速访问所有功能
- 支持键盘操作，减少鼠标依赖
- 标题悬浮组件固定在顶部中央，与顶部边界融合，增强品牌识别

**元素组成**：
- 隐藏式信息：
  - 应用版本信息移至关于面板
  - 帮助提示整合到教程功能
- 快捷操作：
  - ESC键隐藏所有面板
  - 空格键快速切换播放/暂停
  - R键重置模拟
- 标题悬浮组件：
  - 固定在页面顶部中央
  - 半透明黑色背景
  - 无边框设计，与页面顶部边界融合
  - 底部圆角处理，增强视觉层次感

### 3.6 移动界面元素

**设计要点**：
- 针对触摸设备优化的交互设计
- 紧凑布局，突出核心功能
- 支持手势操作和触控友好的控件

**元素组成**：
- 底部导航栏：主要功能模块快速切换
- 手势控制：支持捏合缩放、滑动旋转等手势
- 简化控制面板：核心参数快速调整
- 悬浮操作按钮：常用功能一键访问
- 适配小屏幕的紧凑布局

## 4. 交互流程设计

### 4.1 基础交互流程

#### 4.1.1 模拟运行流程
1. 用户打开应用，直接显示全屏三体场景
2. 点击左下角播放按钮或按空格键开始模拟
3. 点击设置图标打开悬浮面板调整模拟参数
4. 随时按ESC键隐藏所有面板获得纯视图体验
5. 点击重置按钮或按R键恢复到初始状态

#### 4.1.2 简单参数调整
1. 用户打开参数控制面板
2. 选择预设参数组合或调整基本参数
3. 调整三个天体的质量（通过简单滑块）
4. 应用参数到当前模拟

### 4.2 基础界面状态管理

- **模拟状态**：运行中、暂停、重置
- **视图状态**：简单显示选项（轨迹显示等）
- **基本错误处理**：参数错误提示、简单异常处理

### 4.3 简易响应式适配

#### 4.3.1 桌面端交互
- 基础鼠标交互：拖拽旋转、滚轮缩放
- 简单的键盘控制支持
- 所有悬浮组件保持固定位置，视觉上悬浮但不可拖动

#### 4.3.2 移动端交互
- 简化的触控控制：支持捏合缩放、滑动旋转
- 核心功能优先显示，适配小屏幕
- 基础触控目标大小优化

## 5. 视觉设计指南

### 5.1 基础色彩方案

**设计理念**：
- 简洁的宇宙主题色彩
- 确保视觉清晰度和易读性
- 简化色彩管理，易于实现

**色彩系统**：
- **主色**：深蓝色 (#1A237E) - 代表宇宙背景
- **辅助色**：
  - 科技蓝 (#2196F3) - 用于主要按钮和交互元素
  - 成功绿 (#4CAF50) - 用于成功状态
  - 警告橙 (#FF9800) - 用于警告状态
- **中性色**：
  - 深灰 (#333333) - 用于背景
  - 中灰 (#666666) - 用于次要文本
  - 浅灰 (#999999) - 用于边框和分割线
  - 白色 (#FFFFFF) - 用于主要文本
- **天体色**：
  - 红 (#FF5252) - 用于第一颗天体
  - 蓝 (#448AFF) - 用于第二颗天体
  - 黄 (#FFC107) - 用于第三颗天体

### 5.2 简易排版系统

**设计理念**：
- 使用常见的系统字体确保跨平台兼容性
- 清晰的文本层级，便于识别

**字体规范**：
- **主要字体**：无衬线字体（系统默认）
- **备选字体**：Arial, Helvetica, sans-serif

**字体层级**：
- **标题**：18-24px，字重600
- **正文**：14-16px，字重400
- **辅助文本**：12px，字重400

### 5.3 简化图标系统

**设计理念**：
- 使用简单的线条图标
- 确保功能直观易懂

**核心图标**：
- 控制图标：播放、暂停、重置
- 功能图标：设置、帮助、保存
- 状态图标：运行中、已暂停

### 5.4 基础组件设计

**设计理念**：
- 简约现代的UI组件
- 保持视觉一致性
- 降低实现复杂度

**组件样式**：
- **按钮**：
  - 简单的矩形按钮，圆角设计
  - 清晰的悬停和点击状态
- **输入控件**：
  - 基础文本框和滑块
  - 简洁的边框样式
- **面板**：
  - 简约设计，轻微阴影
  - 可折叠的侧边面板

### 5.5 基础动效设计

**设计理念**：
- 最小化必要的动效
- 确保动画流畅不卡顿

**核心动效**：
- 面板展开/折叠的简单动画
- 按钮点击的反馈效果
- 天体运动的平滑动画
- 加载状态的简单指示器

## 6. 原型图示意

### 6.1 基础布局示例

**桌面端布局**：
```
+----------------------------------+
|  [三体模拟器] [预设] [教程] [帮助] |
+----------------------------------+
|                                  |
|                                  |
|         3D视图区                 |
|                                  |
|                                  |
+----------------------------------+
| [开始] [暂停] [重置] 速度: 1x      |
+----------------------------------+
```

**移动端布局**：
```
+--------------------------------+
|     [三体模拟器]               |
+--------------------------------+
|                                |
|         3D视图区                |
|                                |
|                                |
+--------------------------------+
| [播放] [暂停] [重置]  [设置]   |
+--------------------------------+
```

### 6.2 核心交互流程

**基础模拟流程**：
```
打开应用 -> 加载默认场景 -> 点击开始 -> 观察模拟
                  |           |
                  |           v
                  |       调整速度 -> 点击暂停
                  |
                  v
              打开设置 -> 调整参数 -> 应用设置
```

### 6.3 控制面板原型

**参数调整面板**：
```
+----------------------------------+
|  简单设置                        |
+----------------------------------+
|                                  |
|  天体质量调整                    |
|  天体1: [======----] 50%         |
|  天体2: [========--] 80%         |
|  天体3: [==--------] 20%         |
|                                  |
|  预设选择                        |
|  o 太阳-地球-月球                |
|  o 三星系统                      |
|                                  |
|  显示选项                        |
|  [x] 显示轨迹                    |
|  [x] 显示天体标签                |
|                                  |
|  [应用] [重置默认]               |
|                                  |
+----------------------------------+
```

### 6.4 信息显示原型

**简单信息面板**：
```
+----------------------------------+
|  系统信息                        |
+----------------------------------+
|                                  |
|  状态: 运行中                    |
|  时间: 12.4s                     |
|  步数: 1240                      |
|  FPS: 60                         |
|                                  |
|  天体位置                        |
|  天体1: (2.3, 4.1, 0.0)          |
|  天体2: (-1.2, 3.5, 0.0)         |
|  天体3: (0.5, -2.7, 0.0)         |
|                                  |
+----------------------------------+
```

## 7. 开发与实现注意事项

### 7.1 基础技术选型

**前端框架**：
- **核心框架**：Vue 3 + TypeScript + Vite
- **3D渲染**：Three.js + WebGL（专注于简单3D可视化）
- **状态管理**：Pinia
- **样式**：原生CSS（简化开发和维护）

**数据存储**：
- 仅使用LocalStorage保存用户设置和预设场景
- 无后端依赖，完全静态网站

**构建工具**：
- Vite配置，支持快速开发和优化构建
- 依赖管理：npm/yarn，确保版本兼容性
- 优先使用CDN引入第三方库

**部署方案**：
- GitHub Pages，支持便捷的静态网站部署
- 配置CI/CD流程实现自动化部署

### 7.2 简化实现策略

**核心算法**：
- 使用简化的欧拉积分方法计算三体运动
- 基础物理公式实现，专注于基本物理效果
- 合理限制轨迹点数量以保证性能

**渲染优化**：
- 最小化场景对象数量
- 使用最简单的材质和光照
- 避免任何复杂效果

**性能考量**：
- 基本的动画循环优化
- 减少DOM操作频率
- 简化事件系统

### 7.3 基础响应式实现

**布局适配**：
- 基础CSS媒体查询适配桌面/移动
- 简化的布局切换逻辑
- 优先保证核心功能在所有屏幕尺寸可用

**悬浮组件响应式规范**：
- 桌面端（>768px）：
  - 设置按钮：右上角，top: 30px, right: 30px，独立显示
  - 核心功能按钮组：右下角，bottom: 30px, right: 30px，按钮间距32px，当右侧窗口弹出时隐藏
  - 模拟控制按钮组：左下角，bottom: 30px, left: 30px，按钮间距32px
  - 悬浮信息面板：左上角，top: 80px, left: 30px，固定宽度
  - 标题悬浮组件：顶部中央，top: 0
- 移动端（≤768px）：
  - 设置按钮：右上角，top: 25px, right: 25px，尺寸增大至56px，独立显示
  - 核心功能按钮组：右下角，bottom: 25px, right: 25px，按钮尺寸增大至56px，按钮间距36px，当右侧窗口弹出时隐藏
  - 模拟控制按钮组：左下角，bottom: 25px, left: 25px，按钮尺寸增大至56px，按钮间距36px
  - 悬浮信息面板：顶部，top: 60px, left: 10px, right: 10px，宽度自适应
  - 标题悬浮组件：顶部，top: 10px, left: 10px, right: 10px，宽度自适应，字体缩小

**交互状态管理**：
- 当右侧弹出窗口（如设置面板、信息面板等）打开时，自动隐藏右下角核心功能按钮组，避免视觉重叠和交互冲突
- 当右侧弹出窗口关闭时，自动显示右下角核心功能按钮组
- 设置按钮始终保持可见，不随其他按钮组隐藏/显示状态改变

**布局冲突解决方案**：
- 不同区域的悬浮组件之间保持至少50px的间距，避免视觉重叠
- 响应式布局中优先考虑触控目标的可点击区域，确保不小于48px
- 当多个组件在小屏幕上可能发生重叠时，优先显示核心控制按钮
- 固定位置的悬浮组件使用CSS z-index进行层次管理，确保视觉层级清晰

**触摸支持**：
- 基础的触摸手势支持（旋转、缩放）
- 简单的大按钮设计便于触摸操作

**触摸支持**：
- 基础的触摸手势支持（旋转、缩放）
- 简单的大按钮设计便于触摸操作

### 7.4 简单部署方案

**静态网站部署**：
- 完全静态网站，支持GitHub Pages一键部署
- 无需后端服务或数据库
- 支持本地文件直接打开运行

**依赖管理**：
- 极少的外部依赖
- 主要库通过CDN引入
- 简单的依赖说明文档

### 7.5 开源协作指南

**项目结构**：
- 扁平化的文件组织，易于理解
- 清晰的模块划分（核心模拟、UI控制、可视化）
- 详细的README.md文档说明使用方法

**代码规范**：
- 统一的JavaScript/HTML/CSS风格
- 关键函数添加注释说明
- 有意义的变量和函数命名

**贡献流程**：
- Fork + Pull Request标准流程
- 简单的代码审查清单
- 基础的Issue模板（Bug报告、功能请求）

### 7.6 核心功能优先级

**MVP必备功能**：
1. 基础三体运动物理模拟
2. 简单的天体质量参数调整
3. 基础3D可视化展示
4. 播放/暂停/重置基础控制

**第二阶段功能**：
1. 预设经典三体场景选择
2. 轨迹显示开关和长度调整
3. 简单的系统信息显示

**可延后功能**：
1. 任何形式的分析工具
2. 复杂图表和数据可视化
3. 云同步和分享功能
4. 高级UI动画和交互

## 8. 参考资源

### 8.1 核心技术文档
- [Three.js官方文档](https://threejs.org/docs/)
- [WebGL基础教程](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Tutorial)
- 基础HTML/CSS/JavaScript参考资料

### 8.2 三体问题资源
- 三体问题基础物理介绍
- 简单的三体模拟算法示例

### 8.3 开源项目资源
- GitHub项目结构最佳实践
- 简易README.md模板
- 开源许可选择指南（推荐MIT）

---

**文档版本**：v1.1.0（开源版）
**创建日期**：2024年
**状态**：更新版本
**文档所有者**：开源项目团队